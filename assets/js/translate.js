// COMPLETE VOCABULARY - 300+ WORDS FOR DAILY & INDUSTRIAL USE

const localDictionary = {
    // ========== INDONESIAN → ENGLISH ==========
    'id-en': {
        // YOUR REQUESTED PHRASES
        'apakah laptop ini bagus': 'is this laptop good',
        'apakah laptop ini jelek': 'is this laptop bad',
        'apakah barang ini bisa digunakan': 'can this product be used',
        'apakah barang ini masih kategori standar': 'is this product still in standard category',
        
        // BASIC CONVERSATION (50 WORDS)
        // Greetings
        'halo': 'hello',
        'hai': 'hi',
        'selamat pagi': 'good morning',
        'selamat siang': 'good afternoon',
        'selamat sore': 'good evening',
        'selamat malam': 'good night',
        'terima kasih': 'thank you',
        'terima kasih banyak': 'thank you very much',
        'sama-sama': 'you\'re welcome',
        'tolong': 'please',
        'maaf': 'sorry',
        'permisi': 'excuse me',
        
        // Responses
        'ya': 'yes',
        'tidak': 'no',
        'baik': 'good',
        'bagus': 'great',
        'sampai jumpa': 'goodbye',
        'dadah': 'bye',
        'apa kabar': 'how are you',
        'baik-baik saja': 'i\'m fine',
        
        // Pronouns
        'saya': 'i',
        'aku': 'i',
        'kamu': 'you',
        'anda': 'you',
        'dia': 'he/she',
        'mereka': 'they',
        'kami': 'we',
        'kita': 'we',
        
        // CONJUNCTIONS (Kata Sambung - 20 WORDS)
        'dan': 'and',
        'atau': 'or',
        'tapi': 'but',
        'karena': 'because',
        'jika': 'if',
        'ketika': 'when',
        'sebelum': 'before',
        'sesudah': 'after',
        'selama': 'while',
        'meskipun': 'although',
        'walaupun': 'even though',
        'sehingga': 'so that',
        'maka': 'therefore',
        'namun': 'however',
        'lagipula': 'besides',
        'kemudian': 'then',
        'akhirnya': 'finally',
        'sebenarnya': 'actually',
        'mungkin': 'maybe',
        'pasti': 'definitely',
        
        // VERBS (Kata Kerja - 50 WORDS)
        'makan': 'eat',
        'minum': 'drink',
        'tidur': 'sleep',
        'bekerja': 'work',
        'belajar': 'study',
        'membaca': 'read',
        'menulis': 'write',
        'berbicara': 'speak',
        'mendengar': 'listen',
        'melihat': 'see',
        'pergi': 'go',
        'datang': 'come',
        'berjalan': 'walk',
        'lari': 'run',
        'duduk': 'sit',
        'berdiri': 'stand',
        'membeli': 'buy',
        'menjual': 'sell',
        'membawa': 'bring',
        'mengambil': 'take',
        'memberi': 'give',
        'menerima': 'receive',
        'membuka': 'open',
        'menutup': 'close',
        'memulai': 'start',
        'menghentikan': 'stop',
        'mencoba': 'try',
        'menggunakan': 'use',
        'membuat': 'make',
        'memperbaiki': 'fix',
        'memasak': 'cook',
        'membersihkan': 'clean',
        'mencuci': 'wash',
        'menunggu': 'wait',
        'memanggil': 'call',
        'menjawab': 'answer',
        'bertanya': 'ask',
        'menjelaskan': 'explain',
        'memahami': 'understand',
        'tahu': 'know',
        'pikir': 'think',
        'rasa': 'feel',
        'ingin': 'want',
        'perlu': 'need',
        'bisa': 'can',
        'harus': 'must',
        'akan': 'will',
        'sedang': 'am/is/are (doing)',
        
        // NOUNS (Kata Benda - 50 WORDS)
        // People
        'orang': 'person',
        'pria': 'man',
        'wanita': 'woman',
        'anak': 'child',
        'teman': 'friend',
        'keluarga': 'family',
        'ayah': 'father',
        'ibu': 'mother',
        
        // Places
        'rumah': 'house',
        'kantor': 'office',
        'sekolah': 'school',
        'toko': 'shop',
        'pasar': 'market',
        'restoran': 'restaurant',
        'kota': 'city',
        'negara': 'country',
        
        // Things
        'meja': 'table',
        'kursi': 'chair',
        'pintu': 'door',
        'jendela': 'window',
        'buku': 'book',
        'pensil': 'pencil',
        'komputer': 'computer',
        'telepon': 'phone',
        'uang': 'money',
        'waktu': 'time',
        'hari': 'day',
        'bulan': 'month',
        'tahun': 'year',
        
        // Food
        'nasi': 'rice',
        'air': 'water',
        'kopi': 'coffee',
        'teh': 'tea',
        'roti': 'bread',
        'daging': 'meat',
        'sayur': 'vegetable',
        'buah': 'fruit',
        
        // Transportation
        'mobil': 'car',
        'motor': 'motorcycle',
        'sepeda': 'bicycle',
        'bus': 'bus',
        'kereta': 'train',
        'pesawat': 'airplane',
        
        // Nature
        'langit': 'sky',
        'matahari': 'sun',
        'bulan': 'moon',
        'bintang': 'star',
        'pohon': 'tree',
        'bunga': 'flower',
        
        // INDUSTRIAL VOCABULARY (50 WORDS)
        // Quality & Condition
        'kualitas': 'quality',
        'kondisi': 'condition',
        'barang': 'product',
        'produk': 'product',
        'barang baru': 'new product',
        'barang bekas': 'used product',
        'barang cacat': 'defective product',
        'barang rusak': 'damaged product',
        'garansi': 'warranty',
        
        // Technical Terms
        'laptop': 'laptop',
        'komputer': 'computer',
        'prosesor': 'processor',
        'ram': 'ram',
        'hard disk': 'hard disk',
        'ssd': 'ssd',
        'layar': 'screen',
        'baterai': 'battery',
        'kamera': 'camera',
        'wifi': 'wifi',
        'bluetooth': 'bluetooth',
        'keyboard': 'keyboard',
        'mouse': 'mouse',
        'speaker': 'speaker',
        
        // Factory Terms
        'pabrik': 'factory',
        'produksi': 'production',
        'perakitan': 'assembly',
        'quality control': 'quality control',
        'inspeksi': 'inspection',
        'standar': 'standard',
        'sertifikat': 'certificate',
        'stok': 'stock',
        'harga': 'price',
        'jumlah': 'quantity',
        
        // Performance
        'cepat': 'fast',
        'lambat': 'slow',
        'kuat': 'strong',
        'lemah': 'weak',
        'panas': 'hot',
        'dingin': 'cold',
        'berat': 'heavy',
        'ringan': 'light',
        
        // Repair
        'perbaikan': 'repair',
        'ganti': 'replace',
        'spare part': 'spare part',
        'upgrade': 'upgrade',
        'install': 'install',
        
        // Brands
        'asus': 'asus',
        'lenovo': 'lenovo',
        'dell': 'dell',
        'hp': 'hp',
        'acer': 'acer',
        
        // COMMON PHRASES (30 PHRASES)
        'berapa harga': 'how much',
        'di mana': 'where',
        'kapan': 'when',
        'siapa': 'who',
        'mengapa': 'why',
        'bagaimana': 'how',
        'berapa lama': 'how long',
        'berapa banyak': 'how many',
        'bolehkah saya': 'may i',
        'bisakah anda': 'can you',
        'tolong bantu saya': 'please help me',
        'saya tidak mengerti': 'i don\'t understand',
        'bisa diulangi': 'can you repeat',
        'apa artinya': 'what does it mean',
        'saya butuh': 'i need',
        'saya mau': 'i want',
        'ini penting': 'this is important',
        'apa masalahnya': 'what is the problem',
        'bagaimana caranya': 'how to do it',
        'apa solusinya': 'what is the solution',
        'berapa unit': 'how many units',
        'ready stock': 'ready stock',
        'stok kosong': 'out of stock',
        'harga grosir': 'wholesale price',
        'minimum order': 'minimum order',
        'waktu produksi': 'production time',
        'kapan selesai': 'when will it be finished',
        'masih garansi': 'still under warranty',
        'perlu perbaikan': 'needs repair',
        'bisa digunakan': 'can be used'
    },
    
    // ========== ENGLISH → INDONESIAN ==========
    'en-id': {
        // YOUR REQUESTED PHRASES
        'is this laptop good': 'apakah laptop ini bagus',
        'is this laptop bad': 'apakah laptop ini jelek',
        'can this product be used': 'apakah barang ini bisa digunakan',
        'is this product still in standard category': 'apakah barang ini masih kategori standar',
        
        // BASIC CONVERSATION
        // Greetings
        'hello': 'halo',
        'hi': 'hai',
        'good morning': 'selamat pagi',
        'good afternoon': 'selamat siang',
        'good evening': 'selamat sore',
        'good night': 'selamat malam',
        'thank you': 'terima kasih',
        'thank you very much': 'terima kasih banyak',
        'you\'re welcome': 'sama-sama',
        'please': 'tolong',
        'sorry': 'maaf',
        'excuse me': 'permisi',
        
        // Responses
        'yes': 'ya',
        'no': 'tidak',
        'good': 'baik',
        'great': 'bagus',
        'goodbye': 'sampai jumpa',
        'bye': 'dadah',
        'how are you': 'apa kabar',
        'i\'m fine': 'baik-baik saja',
        
        // Pronouns
        'i': 'saya',
        'you': 'kamu',
        'he': 'dia',
        'she': 'dia',
        'they': 'mereka',
        'we': 'kami/kita',
        
        // CONJUNCTIONS
        'and': 'dan',
        'or': 'atau',
        'but': 'tapi',
        'because': 'karena',
        'if': 'jika',
        'when': 'ketika',
        'before': 'sebelum',
        'after': 'sesudah',
        'while': 'selama',
        'although': 'meskipun',
        'even though': 'walaupun',
        'so that': 'sehingga',
        'therefore': 'maka',
        'however': 'namun',
        'besides': 'lagipula',
        'then': 'kemudian',
        'finally': 'akhirnya',
        'actually': 'sebenarnya',
        'maybe': 'mungkin',
        'definitely': 'pasti',
        
        // VERBS
        'eat': 'makan',
        'drink': 'minum',
        'sleep': 'tidur',
        'work': 'bekerja',
        'study': 'belajar',
        'read': 'membaca',
        'write': 'menulis',
        'speak': 'berbicara',
        'listen': 'mendengar',
        'see': 'melihat',
        'go': 'pergi',
        'come': 'datang',
        'walk': 'berjalan',
        'run': 'lari',
        'sit': 'duduk',
        'stand': 'berdiri',
        'buy': 'membeli',
        'sell': 'menjual',
        'bring': 'membawa',
        'take': 'mengambil',
        'give': 'memberi',
        'receive': 'menerima',
        'open': 'membuka',
        'close': 'menutup',
        'start': 'memulai',
        'stop': 'menghentikan',
        'try': 'mencoba',
        'use': 'menggunakan',
        'make': 'membuat',
        'fix': 'memperbaiki',
        'cook': 'memasak',
        'clean': 'membersihkan',
        'wash': 'mencuci',
        'wait': 'menunggu',
        'call': 'memanggil',
        'answer': 'menjawab',
        'ask': 'bertanya',
        'explain': 'menjelaskan',
        'understand': 'memahami',
        'know': 'tahu',
        'think': 'pikir',
        'feel': 'rasa',
        'want': 'ingin',
        'need': 'perlu',
        'can': 'bisa',
        'must': 'harus',
        'will': 'akan',
        
        // NOUNS
        // People
        'person': 'orang',
        'man': 'pria',
        'woman': 'wanita',
        'child': 'anak',
        'friend': 'teman',
        'family': 'keluarga',
        'father': 'ayah',
        'mother': 'ibu',
        
        // Places
        'house': 'rumah',
        'office': 'kantor',
        'school': 'sekolah',
        'shop': 'toko',
        'market': 'pasar',
        'restaurant': 'restoran',
        'city': 'kota',
        'country': 'negara',
        
        // Things
        'table': 'meja',
        'chair': 'kursi',
        'door': 'pintu',
        'window': 'jendela',
        'book': 'buku',
        'pencil': 'pensil',
        'computer': 'komputer',
        'phone': 'telepon',
        'money': 'uang',
        'time': 'waktu',
        'day': 'hari',
        'month': 'bulan',
        'year': 'tahun',
        
        // Food
        'rice': 'nasi',
        'water': 'air',
        'coffee': 'kopi',
        'tea': 'teh',
        'bread': 'roti',
        'meat': 'daging',
        'vegetable': 'sayur',
        'fruit': 'buah',
        
        // Transportation
        'car': 'mobil',
        'motorcycle': 'motor',
        'bicycle': 'sepeda',
        'bus': 'bus',
        'train': 'kereta',
        'airplane': 'pesawat',
        
        // Nature
        'sky': 'langit',
        'sun': 'matahari',
        'moon': 'bulan',
        'star': 'bintang',
        'tree': 'pohon',
        'flower': 'bunga',
        
        // INDUSTRIAL VOCABULARY
        // Quality & Condition
        'quality': 'kualitas',
        'condition': 'kondisi',
        'product': 'barang',
        'new product': 'barang baru',
        'used product': 'barang bekas',
        'defective product': 'barang cacat',
        'damaged product': 'barang rusak',
        'warranty': 'garansi',
        
        // Technical Terms
        'laptop': 'laptop',
        'computer': 'komputer',
        'processor': 'prosesor',
        'ram': 'ram',
        'hard disk': 'hard disk',
        'ssd': 'ssd',
        'screen': 'layar',
        'battery': 'baterai',
        'camera': 'kamera',
        'wifi': 'wifi',
        'bluetooth': 'bluetooth',
        'keyboard': 'keyboard',
        'mouse': 'mouse',
        'speaker': 'speaker',
        
        // Factory Terms
        'factory': 'pabrik',
        'production': 'produksi',
        'assembly': 'perakitan',
        'quality control': 'quality control',
        'inspection': 'inspeksi',
        'standard': 'standar',
        'certificate': 'sertifikat',
        'stock': 'stok',
        'price': 'harga',
        'quantity': 'jumlah',
        
        // Performance
        'fast': 'cepat',
        'slow': 'lambat',
        'strong': 'kuat',
        'weak': 'lemah',
        'hot': 'panas',
        'cold': 'dingin',
        'heavy': 'berat',
        'light': 'ringan',
        
        // Repair
        'repair': 'perbaikan',
        'replace': 'ganti',
        'spare part': 'spare part',
        'upgrade': 'upgrade',
        'install': 'install',
        
        // Brands
        'asus': 'asus',
        'lenovo': 'lenovo',
        'dell': 'dell',
        'hp': 'hp',
        'acer': 'acer',
        
        // COMMON PHRASES
        'how much': 'berapa harga',
        'where': 'di mana',
        'when': 'kapan',
        'who': 'siapa',
        'why': 'mengapa',
        'how': 'bagaimana',
        'how long': 'berapa lama',
        'how many': 'berapa banyak',
        'may i': 'bolehkah saya',
        'can you': 'bisakah anda',
        'please help me': 'tolong bantu saya',
        'i don\'t understand': 'saya tidak mengerti',
        'can you repeat': 'bisa diulangi',
        'what does it mean': 'apa artinya',
        'i need': 'saya butuh',
        'i want': 'saya mau',
        'this is important': 'ini penting',
        'what is the problem': 'apa masalahnya',
        'how to do it': 'bagaimana caranya',
        'what is the solution': 'apa solusinya',
        'how many units': 'berapa unit',
        'ready stock': 'ready stock',
        'out of stock': 'stok kosong',
        'wholesale price': 'harga grosir',
        'minimum order': 'minimum order',
        'production time': 'waktu produksi',
        'when will it be finished': 'kapan selesai',
        'still under warranty': 'masih garansi',
        'needs repair': 'perlu perbaikan',
        'can be used': 'bisa digunakan'
    },
    
    // ========== INDONESIAN → MANDARIN ==========
    'id-zh': {
        // YOUR REQUESTED PHRASES
        'apakah laptop ini bagus': '这台笔记本电脑好吗',
        'apakah laptop ini jelek': '这台笔记本电脑差吗',
        'apakah barang ini bisa digunakan': '这个产品可以用吗',
        'apakah barang ini masih kategori standar': '这个产品还在标准类别吗',
        
        // BASIC WORDS
        'halo': '你好',
        'terima kasih': '谢谢',
        'tolong': '请',
        'maaf': '对不起',
        'ya': '是',
        'tidak': '不是',
        'saya': '我',
        'kamu': '你',
        'dia': '他/她',
        'makan': '吃',
        'minum': '喝',
        'tidur': '睡觉',
        'bekerja': '工作',
        'rumah': '家',
        'sekolah': '学校',
        'kantor': '办公室',
        
        // INDUSTRIAL WORDS
        'laptop': '笔记本电脑',
        'komputer': '电脑',
        'prosesor': '处理器',
        'ram': '内存',
        'hard disk': '硬盘',
        'layar': '屏幕',
        'baterai': '电池',
        'kamera': '相机',
        'wifi': '无线网络',
        'pabrik': '工厂',
        'produksi': '生产',
        'kualitas': '质量',
        'harga': '价格',
        'garansi': '保修'
    },
    
    // ========== MANDARIN → INDONESIAN ==========
    'zh-id': {
        // YOUR REQUESTED PHRASES
        '这台笔记本电脑好吗': 'apakah laptop ini bagus',
        '这台笔记本电脑差吗': 'apakah laptop ini jelek',
        '这个产品可以用吗': 'apakah barang ini bisa digunakan',
        '这个产品还在标准类别吗': 'apakah barang ini masih kategori standar',
        
        // BASIC WORDS
        '你好': 'halo',
        '谢谢': 'terima kasih',
        '请': 'tolong',
        '对不起': 'maaf',
        '是': 'ya',
        '不是': 'tidak',
        '我': 'saya',
        '你': 'kamu',
        '他': 'dia',
        '她': 'dia',
        '吃': 'makan',
        '喝': 'minum',
        '睡觉': 'tidur',
        '工作': 'bekerja',
        '家': 'rumah',
        '学校': 'sekolah',
        '办公室': 'kantor',
        
        // INDUSTRIAL WORDS
        '笔记本电脑': 'laptop',
        '电脑': 'komputer',
        '处理器': 'prosesor',
        '内存': 'ram',
        '硬盘': 'hard disk',
        '屏幕': 'layar',
        '电池': 'baterai',
        '相机': 'kamera',
        '无线网络': 'wifi',
        '工厂': 'pabrik',
        '生产': 'produksi',
        '质量': 'kualitas',
        '价格': 'harga',
        '保修': 'garansi'
    },
    
    // ========== ENGLISH → MANDARIN ==========
    'en-zh': {
        // YOUR REQUESTED PHRASES
        'is this laptop good': '这台笔记本电脑好吗',
        'is this laptop bad': '这台笔记本电脑差吗',
        'can this product be used': '这个产品可以用吗',
        'is this product still in standard category': '这个产品还在标准类别吗',
        
        // BASIC WORDS
        'hello': '你好',
        'thank you': '谢谢',
        'please': '请',
        'sorry': '对不起',
        'yes': '是',
        'no': '不是',
        'i': '我',
        'you': '你',
        'he': '他',
        'she': '她',
        'eat': '吃',
        'drink': '喝',
        'sleep': '睡觉',
        'work': '工作',
        'house': '家',
        'school': '学校',
        'office': '办公室',
        
        // INDUSTRIAL WORDS
        'laptop': '笔记本电脑',
        'computer': '电脑',
        'processor': '处理器',
        'ram': '内存',
        'hard disk': '硬盘',
        'screen': '屏幕',
        'battery': '电池',
        'camera': '相机',
        'wifi': '无线网络',
        'factory': '工厂',
        'production': '生产',
        'quality': '质量',
        'price': '价格',
        'warranty': '保修'
    },
    
    // ========== MANDARIN → ENGLISH ==========
    'zh-en': {
        // YOUR REQUESTED PHRASES
        '这台笔记本电脑好吗': 'is this laptop good',
        '这台笔记本电脑差吗': 'is this laptop bad',
        '这个产品可以用吗': 'can this product be used',
        '这个产品还在标准类别吗': 'is this product still in standard category',
        
        // BASIC WORDS
        '你好': 'hello',
        '谢谢': 'thank you',
        '请': 'please',
        '对不起': 'sorry',
        '是': 'yes',
        '不是': 'no',
        '我': 'i',
        '你': 'you',
        '他': 'he',
        '她': 'she',
        '吃': 'eat',
        '喝': 'drink',
        '睡觉': 'sleep',
        '工作': 'work',
        '家': 'house',
        '学校': 'school',
        '办公室': 'office',
        
        // INDUSTRIAL WORDS
        '笔记本电脑': 'laptop',
        '电脑': 'computer',
        '处理器': 'processor',
        '内存': 'ram',
        '硬盘': 'hard disk',
        '屏幕': 'screen',
        '电池': 'battery',
        '相机': 'camera',
        '无线网络': 'wifi',
        '工厂': 'factory',
        '生产': 'production',
        '质量': 'quality',
        '价格': 'price',
        '保修': 'warranty'
    }
};

// ENHANCED TRANSLATION FUNCTION
async function translateText(text, fromLang, toLang) {
    const trimmedText = text.trim();
    const lowerText = trimmedText.toLowerCase();
    
    // 1. Check exact match in dictionary
    const dictKey = `${fromLang}-${toLang}`;
    
    if (localDictionary[dictKey] && localDictionary[dictKey][lowerText]) {
        return localDictionary[dictKey][lowerText];
    }
    
    // 2. Try partial match (for longer phrases)
    for (const [key, translation] of Object.entries(localDictionary[dictKey] || {})) {
        // Check if the input contains the dictionary key
        if (lowerText.includes(key.toLowerCase())) {
            // Replace the matched part with translation
            const regex = new RegExp(key, 'gi');
            const result = trimmedText.replace(regex, translation);
            if (result !== trimmedText) {
                return result;
            }
        }
    }
    
    // 3. Try word-by-word translation for simple sentences
    if (trimmedText.split(' ').length <= 5) {
        const wordByWord = translateWordByWord(trimmedText, fromLang, toLang);
        if (wordByWord !== trimmedText) {
            return wordByWord;
        }
    }
    
    // 4. Use API for complex sentences
    try {
        return await translateWithAPI(trimmedText, fromLang, toLang);
    } catch (error) {
        console.warn('API failed, using fallback:', error);
        return translateFallback(trimmedText, fromLang, toLang);
    }
}

function translateWordByWord(text, fromLang, toLang) {
    const dictKey = `${fromLang}-${toLang}`;
    const dictionary = localDictionary[dictKey];
    
    if (!dictionary) return text;
    
    const words = text.split(' ');
    const translatedWords = words.map(word => {
        const lowerWord = word.toLowerCase();
        return dictionary[lowerWord] || word;
    });
    
    return translatedWords.join(' ');
}

async function translateWithAPI(text, fromLang, toLang) {
    const url = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${fromLang}|${toLang}`;
    
    try {
        const response = await fetch(url);
        const data = await response.json();
        
        if (data.responseData && data.responseData.translatedText) {
            return data.responseData.translatedText;
        } else {
            throw new Error('No translation received');
        }
    } catch (error) {
        throw error;
    }
}

function translateFallback(text, fromLang, toLang) {
    const dictKey = `${fromLang}-${toLang}`;
    const dictionary = localDictionary[dictKey];
    
    if (!dictionary) {
        return `[Cannot translate from ${fromLang} to ${toLang}]`;
    }
    
    // Simple word-by-word as last resort
    const words = text.split(' ');
    const translatedWords = words.map(word => {
        const lowerWord = word.toLowerCase();
        return dictionary[lowerWord] || word;
    });
    
    const result = translatedWords.join(' ');
    return result === text ? `[Translation not available]` : result;
}

// Make function available globally
window.translateText = translateText;